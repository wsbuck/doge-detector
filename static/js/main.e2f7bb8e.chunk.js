(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,a){e.exports=a.p+"static/media/dog.19fed632.png"},122:function(e){e.exports={0:"Nothing",1:"Chihuahua",2:"Japanese Spaniel",3:"Maltese Dog",4:"Pekinese",5:"Shih-Tzu",6:"Blenheim Spaniel",7:"Papillon",8:"Toy Terrier",9:"Rhodesian Ridgeback",10:"Afghan Hound",11:"Basset",12:"Beagle",13:"Bloodhound",14:"Bluetick",15:"Black-And-Tan Coonhound",16:"Walker Hound",17:"English Foxhound",18:"Redbone",19:"Borzoi",20:"Irish Wolfhound",21:"Italian Greyhound",22:"Whippet",23:"Ibizan Hound",24:"Norwegian Elkhound",25:"Otterhound",26:"Saluki",27:"Scottish Deerhound",28:"Weimaraner",29:"Staffordshire Bullterrier",30:"American Staffordshire Terrier",31:"Bedlington Terrier",32:"Border Terrier",33:"Kerry Blue Terrier",34:"Irish Terrier",35:"Norfolk Terrier",36:"Norwich Terrier",37:"Yorkshire Terrier",38:"Wire-Haired Fox Terrier",39:"Lakeland Terrier",40:"Sealyham Terrier",41:"Airedale",42:"Cairn",43:"Australian Terrier",44:"Dandie Dinmont",45:"Boston Bull",46:"Miniature Schnauzer",47:"Giant Schnauzer",48:"Standard Schnauzer",49:"Scotch Terrier",50:"Tibetan Terrier",51:"Silky Terrier",52:"Soft-Coated Wheaten Terrier",53:"West Highland White Terrier",54:"Lhasa",55:"Flat-Coated Retriever",56:"Curly-Coated Retriever",57:"Golden Retriever",58:"Labrador Retriever",59:"Chesapeake Bay Retriever",60:"German Short-Haired Pointer",61:"Vizsla",62:"English Setter",63:"Irish Setter",64:"Gordon Setter",65:"Brittany Spaniel",66:"Clumber",67:"English Springer",68:"Welsh Springer Spaniel",69:"Cocker Spaniel",70:"Sussex Spaniel",71:"Irish Water Spaniel",72:"Kuvasz",73:"Schipperke",74:"Groenendael",75:"Malinois",76:"Briard",77:"Kelpie",78:"Komondor",79:"Old English Sheepdog",80:"Shetland Sheepdog",81:"Collie",82:"Border Collie",83:"Bouvier Des Flandres",84:"Rottweiler",85:"German Shepherd",86:"Doberman",87:"Miniature Pinscher",88:"Greater Swiss Mountain Dog",89:"Bernese Mountain Dog",90:"Appenzeller",91:"Entlebucher",92:"Boxer",93:"Bull Mastiff",94:"Tibetan Mastiff",95:"French Bulldog",96:"Great Dane",97:"Saint Bernard",98:"Eskimo Dog",99:"Malamute",100:"Siberian Husky",101:"Affenpinscher",102:"Basenji",103:"Pug",104:"Leonberg",105:"Newfoundland",106:"Great Pyrenees",107:"Samoyed",108:"Pomeranian",109:"Chow",110:"Keeshond",111:"Brabancon Griffon",112:"Pembroke",113:"Cardigan",114:"Toy Poodle",115:"Miniature Poodle",116:"Standard Poodle",117:"Mexican Hairless",118:"Dingo",119:"Dhole",120:"African Hunting Dog"}},137:function(e,t,a){e.exports=a(243)},142:function(e,t,a){},145:function(e,t,a){},149:function(e,t){},151:function(e,t){},184:function(e,t){},185:function(e,t){},231:function(e,t){},232:function(e,t){},233:function(e,t){},243:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(15),i=a.n(o),c=(a(142),a(35)),l=a.n(c),s=a(64),u=a(30),d=(a(145),a(121)),m=a.n(d),h=a(122),g=a(40),f=a(247),p=a(245),b=Object(p.a)(function(e){return{root:{width:"95%",padding:e.spacing(1),marginLeft:"auto",marginRight:"auto",marginTop:e.spacing(1),marginBottom:e.spacing(1),maxWidth:"600px"}}});function v(e){var t=document.createElement("canvas"),a=b();var n=e.image,o=e.cameraStatus,i=document.querySelector("video");return o?function(){var e=document.querySelector("video");navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment"}}).then(function(t){return t,e.srcObject=t,t}).catch(function(e){console.log(e)})}():i&&function(a){if(a.srcObject){var n=a.srcObject;console.log("ok"),t.height=a.videoHeight,t.width=a.videoWidth,t.getContext("2d").drawImage(a,0,0,t.width,t.height);var r=t.toDataURL("image/png");n.getTracks().forEach(function(e){e.stop()}),a.srcObject=null,e.getImage(r)}}(i),r.a.createElement(f.a,{className:a.root,color:"primary"},r.a.createElement("video",{alt:"doggo",className:o?"doggo-images":"hidden",autoPlay:!0,playsInline:!0}),r.a.createElement("img",{src:n,alt:"doggo",className:o?"hidden":"doggo-images"}))}var w=a(267),E=a(268),y=a(269),S=a(127),k=a.n(S),B=a(128),x=a.n(B),T=a(129),j=a.n(T),C=a(270),O=function(){return"standalone"in window.navigator&&window.navigator.standalone},N=function(){var e=window.navigator.userAgent,t=!!e.match(/iPad/i)||!!e.match(/iPhone/i),a=!!e.match(/WebKit/i);return t&&a&&!e.match(/CriOS/i)},W=function(){var e=window.navigator.userAgent;return!!e.match(/iPad/i)||!!e.match(/iPhone/i)},P=Object(p.a)(function(e){return{text:{padding:e.spacing(2,2,0)},appBar:{justifyContent:"center",display:"grid",top:"auto",bottom:0,padding:0,height:"6%"},grow:{flexGrow:1},fabButton:{display:"grid",zIndex:1,top:-30,margin:e.spacing(2)}}});function A(e){var t=P(),a=e.modelLoaded,n=e.cameraStatus;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"file",id:"imgupload",onChange:function(t){return function(t){e.getImage(URL.createObjectURL(t.target.files[0]))}(t)}}),r.a.createElement(w.a,{position:"fixed",color:"primary",className:t.appBar},r.a.createElement(E.a,null,!W()||N()&&!O()?r.a.createElement(y.a,{color:"secondary","aria-label":"turn on camera button",className:t.fabButton,onClick:function(){e.updateCamera(!n)}},r.a.createElement(k.a,null)):"",r.a.createElement(y.a,{color:"secondary","aria-label":"upload image button",className:t.fabButton,onClick:function(){document.querySelector("#imgupload").click()},disabled:n},r.a.createElement(x.a,null)),r.a.createElement(y.a,{color:"secondary","aria-label":"predict breed button",className:t.fabButton,onClick:function(){n||e.predict()},disabled:!a||n},a?r.a.createElement(j.a,null):r.a.createElement(C.a,{color:"secondary"})),r.a.createElement("div",{className:t.grow}))))}var D=a(271),R=a(272),I=a(273),M=a(274),F=a(275),G=Object(p.a)(function(e){return{root:{width:"95%",marginLeft:"auto",marginRight:"auto",maxWidth:600,marginTop:e.spacing(3),marginBottom:100,overflowX:"auto"},table:{maxWidth:600},cell:{color:"white"}}});function L(e){var t=G();return e.prediction?r.a.createElement(f.a,{className:t.root},r.a.createElement(D.a,{className:t.table,size:"small"},r.a.createElement(R.a,null,r.a.createElement(I.a,null,r.a.createElement(M.a,null,"Breed"),r.a.createElement(M.a,{align:"right"},"Probability"))),r.a.createElement(F.a,null,e.prediction.map(function(e,t){return r.a.createElement(I.a,{key:e.className},r.a.createElement(M.a,{component:"th",scope:"row"},e.className),r.a.createElement(M.a,{align:"right"},parseFloat(1e4*e.probability/100).toFixed(2),"%"))})))):""}var z=a(132),H=a(277),U=a(280),K=a(278),q=a(279),J=a(284),Y=a(281),V=a(276),X=a(130),$=a.n(X),Q=Object(p.a)(function(e){return{bodyText:{color:"white","& a":{color:"#FFAB91"}}}});function Z(){var e=r.a.useState(!1),t=Object(u.a)(e,2),a=t[0],n=t[1],o=Q();function i(){n(!1)}return r.a.createElement("div",null,r.a.createElement(V.a,{color:"secondary","aria-label":"Information",onClick:function(){n(!0)}},r.a.createElement($.a,null)),r.a.createElement(J.a,{open:a,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(H.a,{id:"alert-dialog-title"},"Hello!"),r.a.createElement(K.a,null,r.a.createElement(q.a,{id:"alert-dialog-description",className:o.bodyText},"This is made with tensorflow.js and React. The model is mobilenet retrained only on the dogs of ImageNet. The code for this project can be found ",r.a.createElement("a",{href:"https://github.com/wsbuck/doge-detector"},"here")," and the tensorflow model is ",r.a.createElement("a",{href:"https://github.com/wsbuck/DogeNetTFModel"},"here"),".",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,"The prediction is run entirely on your device! Your images are never sent to a server."))),r.a.createElement(U.a,null,r.a.createElement(Y.a,{onClick:i,color:"primary"},"Close"))))}var _=Object(p.a)(function(e){return{root:{flexGrow:1},appBar:{},title:{flexGrow:1,marginLeft:e.spacing(2)}}});function ee(){var e=_();return r.a.createElement("div",{className:e.root},r.a.createElement(w.a,{className:e.appBar,position:"static",color:"primary"},r.a.createElement(E.a,null,r.a.createElement(z.a,{variant:"h6",color:"inherit",className:e.title},"Doge Detector"),r.a.createElement(Z,null))))}var te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ae(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var ne=a(282),re=a(283),oe=a(131),ie=Object(oe.a)({palette:{primary:{main:"#424242"},secondary:{main:"#FFAB91"},background:{default:"#212121"}},overrides:{MuiPaper:{root:{backgroundColor:"#424242",color:"#eeeeee"}},MuiTableCell:{root:{borderBottom:"1px solid rgba(81, 81, 81, 1)"},head:{color:"white"},body:{color:"#eeeeee"}}}});i.a.render(r.a.createElement(ne.a,{theme:ie},r.a.createElement(re.a,null),r.a.createElement(function(){var e=Object(n.useState)(m.a),t=Object(u.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),c=Object(u.a)(i,2),d=c[0],f=c[1],p=Object(n.useState)(!1),b=Object(u.a)(p,2),w=b[0],E=b[1],y=Object(n.useState)(null),S=Object(u.a)(y,2),k=S[0],B=S[1],x=Object(n.useState)(null),T=Object(u.a)(x,2),j=T[0],C=T[1];function O(e){o(e)}function N(e,t){return W.apply(this,arguments)}function W(){return(W=Object(s.a)(l.a.mark(function e(t,a){var n,r,o,i,c,s,u,d,m;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.data();case 2:for(n=e.sent,r=[],o=0;o<n.length;o++)r.push({value:n[o],index:o});for(r.sort(function(e,t){return t.value-e.value}),i=new Float32Array(a),c=new Int32Array(a),s=0;s<a;s++)i[s]=r[s].value,c[s]=r[s].index;for(u=[],d=0,m=0;m<c.length;m++)d+=i[m],u.push({className:h[c[m]],probability:i[m]});return u.push({className:"Other",probability:1-d}),e.abrupt("return",u);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function P(){return(P=Object(s.a)(l.a.mark(function e(){var t,a,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.querySelector("img"),a=g.d(function(){var e=g.a.fromPixels(t).resizeNearestNeighbor([224,224]).toFloat(),a=g.c(127.5),n=e.sub(a).div(a).reshape([1,224,224,3]);return k.predict(n)}),e.next=4,N(a,3);case 4:n=e.sent,C(n);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(n.useEffect)(function(){window.indexedDB.databases().then(function(e){return e.filter(function(e){return"tensorflowjs"===e.name})}).then(function(){var e=Object(s.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=8;break}return console.log("downloading model..."),e.next=5,g.b("https://s3-us-west-1.amazonaws.com/wsbuck/tfjs/model.json");case 5:return e.abrupt("return",e.sent);case 8:return e.next=10,g.b("indexeddb://model");case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).then(function(e){return e.save("indexeddb://model"),e}).catch(console.error).then(function(e){B(e),E(!0)})},[]),r.a.createElement("div",{className:"App"},r.a.createElement(ee,null),r.a.createElement(v,{image:a,cameraStatus:d,getImage:O}),r.a.createElement(L,{prediction:j}),r.a.createElement(A,{updateCamera:f,cameraStatus:d,predict:function(){return P.apply(this,arguments)},modelLoaded:w,getImage:O}))},null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/doge-detector",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/doge-detector","/service-worker.js");te?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ae(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ae(t,e)})}}()}},[[137,1,2]]]);
//# sourceMappingURL=main.e2f7bb8e.chunk.js.map